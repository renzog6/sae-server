(self.webpackChunksae_web=self.webpackChunksae_web||[]).push([[704],{9457:function(t,e){var a,o;void 0===(o="function"==typeof(a=function(){"use strict";function e(t,e,a){var o=new XMLHttpRequest;o.open("GET",t),o.responseType="blob",o.onload=function(){c(o.response,e,a)},o.onerror=function(){console.error("could not download file")},o.send()}function a(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function o(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var a=document.createEvent("MouseEvents");a.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(a)}}var n="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,i=n.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=n.saveAs||("object"!=typeof window||window!==n?function(){}:"download"in HTMLAnchorElement.prototype&&!i?function(t,i,c){var r=n.URL||n.webkitURL,l=document.createElement("a");l.download=i=i||t.name||"download",l.rel="noopener","string"==typeof t?(l.href=t,l.origin===location.origin?o(l):a(l.href)?e(t,i,c):o(l,l.target="_blank")):(l.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(l.href)},4e4),setTimeout(function(){o(l)},0))}:"msSaveOrOpenBlob"in navigator?function(t,n,i){if(n=n||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,i),n);else if(a(t))e(t,n,i);else{var c=document.createElement("a");c.href=t,c.target="_blank",setTimeout(function(){o(c)})}}:function(t,a,o,c){if((c=c||open("","_blank"))&&(c.document.title=c.document.body.innerText="downloading..."),"string"==typeof t)return e(t,a,o);var r="application/octet-stream"===t.type,l=/constructor/i.test(n.HTMLElement)||n.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent);if((s||r&&l||i)&&"undefined"!=typeof FileReader){var d=new FileReader;d.onloadend=function(){var t=d.result;t=s?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),c?c.location.href=t:location=t,c=null},d.readAsDataURL(t)}else{var u=n.URL||n.webkitURL,m=u.createObjectURL(t);c?c.location=m:location.href=m,c=null,setTimeout(function(){u.revokeObjectURL(m)},4e4)}});n.saveAs=c.saveAs=c,t.exports=c})?a.apply(e,[]):a)||(t.exports=o)},3704:(t,e,a)=>{"use strict";a.r(e),a.d(e,{EmpleadosVacaionesModule:()=>Ot});var o=a(8583),n=a(4655),i=a(1841),c=a(7716),r=a(9692),l=a(1494),s=a(2091),d=a(3342),u=a(9457),m=a(4880),p=a(6001),f=a(9853),g=a(5618),h=a(8295),Z=a(9983),x=a(1095),w=a(2238),v=a(8635),b=a(7153),A=a(3679),C=a(3738),_=a(1769),T=a(3220),y=a(7441),q=a(2458);function k(t,e){if(1&t&&(c.TgZ(0,"mat-option",20),c._uU(1),c.qZA()),2&t){const t=e.$implicit;c.Q6J("value",t),c.xp6(1),c.Oqu(t.name)}}function O(t,e){1&t&&(c.TgZ(0,"mat-error"),c._uU(1,"Name is required"),c.qZA())}function M(t,e){1&t&&(c.TgZ(0,"mat-error"),c._uU(1,"No mas de 5 caracteres"),c.qZA())}function U(t,e){1&t&&(c.TgZ(0,"mat-error"),c._uU(1,"No mas de 20 caracteres"),c.qZA())}function D(t,e){1&t&&(c.TgZ(0,"mat-error"),c._uU(1,"Name is required"),c.qZA())}function N(t,e){1&t&&(c.TgZ(0,"mat-error"),c._uU(1,"No mas de 20 caracteres"),c.qZA())}let S=(()=>{class t{constructor(t,e,a,o,n){this.dialogRef=t,this.data=e,this.formBuilder=a,this.vacacionSrv=o,this.router=n,this.isDataAvailable=!1,this.detailVacacion=[{name:"Toma Vacaciones",value:-1},{name:"Nuevas Vacaciones",value:1}],this.selectedDetailVacation=this.detailVacacion[0],this.vacacion=e}ngOnInit(){this.form=this.formBuilder.group({fecha:new A.NI(new Date,[A.kI.required]),detalle:new A.NI(this.selectedDetailVacation),dias:new A.NI(this.vacacion.dias?this.vacacion.dias:"",[A.kI.required]),anio:new A.NI(this.vacacion.anio?this.vacacion.anio:"",[A.kI.required]),fechaToma:new A.NI(new Date,[A.kI.required]),info:new A.NI(this.vacacion.info?this.vacacion.info:"")})}create(t){this.form.valid&&this.executeCreation(t)}executeCreation(t){let e=new b.V;e.fecha=t.fecha,e.detalle=t.detalle.name+" "+t.anio,e.dias=t.dias*t.detalle.value,e.anio=t.anio,e.fechaToma=t.fechaToma,e.info=t.info,console.log(e),this.dialogRef.close(e)}hasError(t,e){return this.form.controls[t].hasError(e)}onNoClick(){this.dialogRef.close(),this.router.navigate(["/empleados/vacaciones"])}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(w.so),c.Y36(w.WI),c.Y36(A.qu),c.Y36(p.e),c.Y36(n.F0))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-vacacion-create"]],decls:47,vars:13,consts:[["fxLayout","row wrap","fxLayoutAlign","center center"],["fxFlex","90%","fxFlex.xs","100%",1,"form"],["autocomplete","off","novalidate","","fxLayout","column wrap","fxLayoutAlign","center center","fxLayoutGap","10px",3,"formGroup","ngSubmit"],[1,"items"],[1,"input-small"],["matInput","","placeholder","Fecha","formControlName","fecha","id","fecha","readonly","",3,"matDatepicker","click"],["matSuffix","",3,"for"],["pickerFecha",""],["formControlName","detalle","id","detalle",3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],[1,"input-number"],["matInput","","type","number","placeholder","Dias","formControlName","dias","id","dias"],["align","end"],[4,"ngIf"],["matInput","","type","number","placeholder","A\xf1o","formControlName","anio","id","anio"],["matInput","","placeholder","Fecha Toma","formControlName","fechaToma","id","fechaToma","readonly","",3,"matDatepicker","click"],["pickerFechaToma",""],["matInput","","type","text","placeholder","Info","formControlName","info","id","info"],["mat-raised-button","","md-dialog-close","","color","primary","type","submit",3,"disabled"],["type","button","mat-raised-button","","md-dialog-close","","color","warn",3,"click"],[3,"value"]],template:function(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"section",0),c.TgZ(1,"mat-card",1),c.TgZ(2,"mat-card-title"),c._uU(3,"Nueva Vacacion"),c.qZA(),c.TgZ(4,"form",2),c.NdJ("ngSubmit",function(){return e.create(e.form.value)}),c.TgZ(5,"mat-card-content"),c._UZ(6,"mat-divider"),c.TgZ(7,"div",3),c.TgZ(8,"mat-form-field",4),c.TgZ(9,"input",5),c.NdJ("click",function(){return c.CHM(t),c.MAs(12).open()}),c.qZA(),c._UZ(10,"mat-datepicker-toggle",6),c._UZ(11,"mat-datepicker",null,7),c.qZA(),c.TgZ(13,"mat-form-field"),c.TgZ(14,"mat-label"),c._uU(15,"Detalle"),c.qZA(),c.TgZ(16,"mat-select",8),c.NdJ("valueChange",function(t){return e.selectedDetailVacation=t}),c._UZ(17,"mat-option"),c.YNc(18,k,2,2,"mat-option",9),c.qZA(),c.qZA(),c.TgZ(19,"mat-form-field",10),c._UZ(20,"input",11),c.TgZ(21,"mat-hint",12),c._uU(22,"---"),c.qZA(),c.YNc(23,O,2,0,"mat-error",13),c.YNc(24,M,2,0,"mat-error",13),c.qZA(),c.TgZ(25,"mat-form-field",10),c._UZ(26,"input",14),c.YNc(27,U,2,0,"mat-error",13),c.qZA(),c.TgZ(28,"mat-form-field",4),c.TgZ(29,"input",15),c.NdJ("click",function(){return c.CHM(t),c.MAs(32).open()}),c.qZA(),c._UZ(30,"mat-datepicker-toggle",6),c._UZ(31,"mat-datepicker",null,16),c.TgZ(33,"mat-hint",12),c._uU(34,"Cuando comienza."),c.qZA(),c.qZA(),c.TgZ(35,"mat-form-field"),c._UZ(36,"input",17),c.TgZ(37,"mat-hint",12),c._uU(38,"No mas de 20 caracteres"),c.qZA(),c.YNc(39,D,2,0,"mat-error",13),c.YNc(40,N,2,0,"mat-error",13),c.qZA(),c.qZA(),c.qZA(),c.TgZ(41,"mat-card-actions"),c._UZ(42,"mat-divider"),c.TgZ(43,"button",18),c._uU(44," Guardar "),c.qZA(),c.TgZ(45,"button",19),c.NdJ("click",function(){return e.onNoClick()}),c._uU(46," Cancelar "),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.qZA()}if(2&t){const t=c.MAs(12),a=c.MAs(32);c.xp6(4),c.Q6J("formGroup",e.form),c.xp6(5),c.Q6J("matDatepicker",t),c.xp6(1),c.Q6J("for",t),c.xp6(6),c.Q6J("value",e.selectedDetailVacation),c.xp6(2),c.Q6J("ngForOf",e.detailVacacion),c.xp6(5),c.Q6J("ngIf",e.hasError("dias","required")),c.xp6(1),c.Q6J("ngIf",e.hasError("dias","maxlength")),c.xp6(3),c.Q6J("ngIf",e.hasError("anio","maxlength")),c.xp6(2),c.Q6J("matDatepicker",a),c.xp6(1),c.Q6J("for",a),c.xp6(9),c.Q6J("ngIf",e.hasError("info","required")),c.xp6(1),c.Q6J("ngIf",e.hasError("info","maxlength")),c.xp6(3),c.Q6J("disabled",!e.form.valid)}},directives:[g.xw,g.Wh,C.a8,g.yH,C.n5,A._Y,A.JL,g.SQ,A.sg,C.dn,_.d,h.KE,Z.Nt,A.Fj,T.hl,A.JJ,A.u,T.nW,h.R9,T.Mq,h.hX,y.gD,q.ey,o.sg,A.wV,h.bx,o.O5,C.hq,x.lW,h.TO],styles:[".form[_ngcontent-%COMP%]{min-width:350px;margin-top:5px}.form[_ngcontent-%COMP%]   .items[_ngcontent-%COMP%]{display:flex;flex-flow:row wrap;justify-content:space-around}.form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{margin:auto;padding:10px;width:300px;min-width:200px;justify-content:center}.form[_ngcontent-%COMP%]   .input-number[_ngcontent-%COMP%], .form[_ngcontent-%COMP%]   .input-small[_ngcontent-%COMP%]{width:120px;min-width:80px}mat-card-title[_ngcontent-%COMP%]{text-align:center}"]}),t})();var P=a(7119);let Y=(()=>{class t{constructor(t,e,a,o,n,i){this.dialogRef=t,this.data=e,this.vacacionSvc=a,this.router=o,this.dialog=n,this.errorSvc=i,this.vacacion=e}ngOnInit(){this.dialogConfig={height:"200px",width:"400px",disableClose:!0,data:{}}}onCancel(){this.dialogRef.close(),this.router.navigate(["/empleados/vacaciones"])}deleteVacacion(){this.vacacionSvc.delete(this.vacacion.idVacacion).subscribe(t=>{this.dialog.open(v.V,this.dialogConfig),this.dialogRef.afterClosed().subscribe(t=>{this.router.navigate(["/empleados/vacaciones"])}),this.dialogRef.close()},t=>{this.errorSvc.dialogConfig=this.dialogConfig,this.errorSvc.handleError(t),this.dialogRef.close()})}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(w.so),c.Y36(w.WI),c.Y36(p.e),c.Y36(n.F0),c.Y36(w.uw),c.Y36(P.q))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-vacacion-delete"]],decls:30,vars:5,consts:[["fxLayout","row wrap","fxLayoutAlign","center center"],["fxFlex","500px","fxFlex.xs","100%"],["fxLayout","column wrap","fxLayoutGap","40px"],["fxLayout","row wrap","fxFlex",""],["fxFlex",""],["mat-raised-button","","color","primary",3,"click"],["type","button","mat-raised-button","","color","warn",3,"click"]],template:function(t,e){1&t&&(c.TgZ(0,"section",0),c.TgZ(1,"mat-card",1),c.TgZ(2,"mat-card-title"),c._uU(3,"Delete Vacacion"),c.qZA(),c.TgZ(4,"mat-card-content"),c.TgZ(5,"div",2),c.TgZ(6,"div",3),c.TgZ(7,"div",4),c.TgZ(8,"strong"),c._uU(9,"Vacacion Detalle:"),c.qZA(),c.qZA(),c.TgZ(10,"div",4),c._uU(11),c.qZA(),c.qZA(),c.TgZ(12,"div",3),c.TgZ(13,"div",4),c.TgZ(14,"strong"),c._uU(15,"Fecha:"),c.qZA(),c.qZA(),c.TgZ(16,"div",4),c._uU(17),c.ALo(18,"date"),c.qZA(),c.qZA(),c.TgZ(19,"div",3),c.TgZ(20,"div",4),c.TgZ(21,"strong"),c._uU(22,"Dias:"),c.qZA(),c.qZA(),c.TgZ(23,"div",4),c._uU(24),c.qZA(),c.qZA(),c.qZA(),c.qZA(),c.TgZ(25,"mat-card-actions"),c.TgZ(26,"button",5),c.NdJ("click",function(){return e.deleteVacacion()}),c._uU(27," Delete "),c.qZA(),c.TgZ(28,"button",6),c.NdJ("click",function(){return e.onCancel()}),c._uU(29," Cancel "),c.qZA(),c.qZA(),c.qZA(),c.qZA()),2&t&&(c.xp6(11),c.Oqu(null==e.vacacion?null:e.vacacion.detalle),c.xp6(6),c.Oqu(c.lcZ(18,3,null==e.vacacion?null:e.vacacion.fecha)),c.xp6(7),c.Oqu(null==e.vacacion?null:e.vacacion.dias))},directives:[g.xw,g.Wh,C.a8,g.yH,C.n5,C.dn,g.SQ,C.hq,x.lW],pipes:[o.uU],styles:["mat-card-actions[_ngcontent-%COMP%], mat-card-content[_ngcontent-%COMP%], mat-card-title[_ngcontent-%COMP%]{text-align:center}mat-card-content[_ngcontent-%COMP%]{padding-top:20px;padding-bottom:20px}"]}),t})();var E=a(6627);function R(t,e){1&t&&(c.TgZ(0,"th",21),c._uU(1,"Fecha"),c.qZA())}function J(t,e){if(1&t&&(c.TgZ(0,"td",22),c._uU(1),c.ALo(2,"date"),c.qZA()),2&t){const t=e.$implicit,a=c.oxw();c.xp6(1),c.hij(" ",c.xi3(2,1,a.toARString(t.fecha),"dd/MM/yyyy")," ")}}function Q(t,e){1&t&&(c.TgZ(0,"th",21),c._uU(1,"Detalle"),c.qZA())}function F(t,e){if(1&t&&(c.TgZ(0,"td",22),c._uU(1),c.qZA()),2&t){const t=e.$implicit;c.xp6(1),c.hij(" ",t.detalle," ")}}function V(t,e){1&t&&(c.TgZ(0,"th",21),c._uU(1,"Dias"),c.qZA())}function L(t,e){if(1&t&&(c.TgZ(0,"td",22),c._uU(1),c.qZA()),2&t){const t=e.$implicit;c.xp6(1),c.hij(" ",t.dias," ")}}function j(t,e){if(1&t&&(c.TgZ(0,"td",23),c._uU(1),c.qZA()),2&t){const t=c.oxw();c.xp6(1),c.hij(" Total de dias disponibles: ",t.getTotalDias()," ")}}function I(t,e){1&t&&(c.TgZ(0,"th",21),c._uU(1,"A\xf1o"),c.qZA())}function B(t,e){if(1&t&&(c.TgZ(0,"td",22),c._uU(1),c.qZA()),2&t){const t=e.$implicit;c.xp6(1),c.hij(" ",t.anio," ")}}function H(t,e){1&t&&(c.TgZ(0,"th",21),c._uU(1,"Inicia"),c.qZA())}function z(t,e){if(1&t&&(c.TgZ(0,"td",22),c._uU(1),c.ALo(2,"date"),c.qZA()),2&t){const t=e.$implicit,a=c.oxw();c.xp6(1),c.hij(" ",c.xi3(2,1,a.toARString(t.fechaToma),"dd/MM/yyyy")," ")}}function $(t,e){1&t&&(c.TgZ(0,"th",21),c._uU(1,"Info"),c.qZA())}function X(t,e){if(1&t&&(c.TgZ(0,"td",22),c._uU(1),c.qZA()),2&t){const t=e.$implicit;c.xp6(1),c.hij(" ",t.info," ")}}function G(t,e){1&t&&(c.TgZ(0,"th",24),c._uU(1,"Print"),c.qZA())}function W(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"td",22),c.TgZ(1,"button",25),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw().printVacacion(e)}),c.TgZ(2,"mat-icon",26),c._uU(3,"print"),c.qZA(),c.qZA(),c.qZA()}}function K(t,e){1&t&&(c.TgZ(0,"th",24),c._uU(1,"Borrar"),c.qZA())}function tt(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"td",22),c.TgZ(1,"button",27),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw().deleteVacacion(e)}),c.TgZ(2,"mat-icon",26),c._uU(3,"delete"),c.qZA(),c.qZA(),c.qZA()}2&t&&(c.xp6(1),c.Q6J("routerLink","delete"))}function et(t,e){1&t&&c._UZ(0,"tr",28)}function at(t,e){1&t&&c._UZ(0,"tr",29)}function ot(t,e){1&t&&c._UZ(0,"tr",30)}const nt=function(){return["dias"]},it=function(){return[10,20,50,100]};let ct=(()=>{class t{constructor(t,e,a,o,n){this.location=t,this.vacacionSvc=e,this.dialog=a,this.errorSvc=o,this.router=n,this.totalDias=0,this.columnas=["fecha","detalle","dias","anio","fechaToma","info","print","delete"],this.dataSource=new s.by}ngOnChanges(t){console.log(t),this.loadVacaciones(t.idEmpleado.currentValue)}ngOnInit(){this.dialogConfig={height:"200px",width:"400px",disableClose:!0,data:{}}}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}loadVacaciones(t){-1!=t?(this.dataSource.data=[],this.vacacionSvc.getListByEmpleado(t).pipe((0,d.b)(t=>console.log(t)),(0,d.b)(t=>this.dataSource.data=t),(0,d.b)(t=>this.totalDias=t.map(t=>t.dias).reduce((t,e)=>t+e,0))).subscribe()):this.dataSource.data=[]}getTotalDias(){return this.totalDias}printVacacion(t){this.vacacionSvc.downloadPDF(t.idVacacion).subscribe(t=>{4===t.type&&saveAs(new File([t.body],t.headers.get("File-Name"),{type:`${t.headers.get("Content-Type")};charset=utf-8`}))},t=>{console.log("ERROR::: ",t)})}exportVacacion(){this.vacacionSvc.download(this.idEmpleado).subscribe(t=>{4===t.type&&saveAs(new File([t.body],t.headers.get("File-Name"),{type:`${t.headers.get("Content-Type")};charset=utf-8`}))},t=>{console.log("ERROR::: ",t)})}deleteVacacion(t){const e=new w.vA;e.disableClose=!0,e.autoFocus=!0,e.data=t,this.dialog.open(Y,e).afterClosed().subscribe(t=>{this.loadVacaciones(this.idEmpleado)})}openCreateVacacion(t){t&&(this.vacacionSelect=new b.V);const e=new w.vA;e.disableClose=!0,e.autoFocus=!0,e.data=this.vacacionSelect,this.dialog.open(S,e).afterClosed().subscribe(t=>{null!=t&&(this.vacacionSelect=t,this.vacacionSvc.create(this.idEmpleado,t).subscribe(t=>{this.dialog.open(v.V,this.dialogConfig).afterClosed().subscribe(t=>{this.router.navigate(["/empleados/vacaciones"]),this.loadVacaciones(this.idEmpleado)})},t=>{this.errorSvc.dialogConfig=Object.assign({},this.dialogConfig),this.errorSvc.handleError(t)}))})}toARString(t){let e=new Date(t),a=60*(480-e.getTimezoneOffset())*1e3;return new Date(e.getTime()+a).toISOString()}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(o.Ye),c.Y36(p.e),c.Y36(w.uw),c.Y36(P.q),c.Y36(n.F0))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-vacacion-list"]],viewQuery:function(t,e){if(1&t&&(c.Gf(l.YE,5),c.Gf(r.NW,5)),2&t){let t;c.iGM(t=c.CRH())&&(e.sort=t.first),c.iGM(t=c.CRH())&&(e.paginator=t.first)}},inputs:{idEmpleado:"idEmpleado"},features:[c.TTD],decls:40,vars:13,consts:[[1,"example-label"],[1,"example-button-row"],["mat-stroked-button","","color","primary","routerLinkActive","",3,"routerLink","disabled","click"],[1,"separador"],["mat-table","","matSort","","name","detalleVacaciones","id","detalleVacaciones",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","fecha"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","detalle"],["matColumnDef","dias"],["mat-footer-cell","",4,"matFooterCellDef"],["matColumnDef","anio"],["matColumnDef","fechaToma"],["matColumnDef","info"],["matColumnDef","print"],["mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","delete"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-footer-row","",4,"matFooterRowDef","matFooterRowDefSticky"],[3,"pageSize","pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-footer-cell",""],["mat-header-cell",""],["mat-icon-button","","color","primary",3,"click"],[1,"mat-18"],["mat-icon-button","","color","danger",3,"routerLink","click"],["mat-header-row",""],["mat-row",""],["mat-footer-row",""]],template:function(t,e){1&t&&(c.TgZ(0,"div"),c.TgZ(1,"section"),c.TgZ(2,"div",0),c._uU(3,"Detalle"),c.qZA(),c.TgZ(4,"div",1),c.TgZ(5,"button",2),c.NdJ("click",function(){return e.openCreateVacacion(!0)}),c._uU(6," Agregar "),c.qZA(),c.TgZ(7,"button",2),c.NdJ("click",function(){return e.exportVacacion()}),c._uU(8," Exportar "),c.qZA(),c.qZA(),c.qZA(),c._UZ(9,"mat-divider",3),c.TgZ(10,"table",4),c.ynx(11,5),c.YNc(12,R,2,0,"th",6),c.YNc(13,J,3,4,"td",7),c.BQk(),c.ynx(14,8),c.YNc(15,Q,2,0,"th",6),c.YNc(16,F,2,1,"td",7),c.BQk(),c.ynx(17,9),c.YNc(18,V,2,0,"th",6),c.YNc(19,L,2,1,"td",7),c.YNc(20,j,2,1,"td",10),c.BQk(),c.ynx(21,11),c.YNc(22,I,2,0,"th",6),c.YNc(23,B,2,1,"td",7),c.BQk(),c.ynx(24,12),c.YNc(25,H,2,0,"th",6),c.YNc(26,z,3,4,"td",7),c.BQk(),c.ynx(27,13),c.YNc(28,$,2,0,"th",6),c.YNc(29,X,2,1,"td",7),c.BQk(),c.ynx(30,14),c.YNc(31,G,2,0,"th",15),c.YNc(32,W,4,0,"td",7),c.BQk(),c.ynx(33,16),c.YNc(34,K,2,0,"th",15),c.YNc(35,tt,4,1,"td",7),c.BQk(),c.YNc(36,et,1,0,"tr",17),c.YNc(37,at,1,0,"tr",18),c.YNc(38,ot,1,0,"tr",19),c.qZA(),c._UZ(39,"mat-paginator",20),c.qZA()),2&t&&(c.xp6(5),c.Q6J("routerLink","create")("disabled",!(-1!=e.idEmpleado)),c.xp6(2),c.Q6J("routerLink","exportExcel")("disabled",!(-1!=e.idEmpleado)),c.xp6(3),c.Q6J("dataSource",e.dataSource),c.xp6(26),c.Q6J("matHeaderRowDef",e.columnas),c.xp6(1),c.Q6J("matRowDefColumns",e.columnas),c.xp6(1),c.Q6J("matFooterRowDef",c.DdM(11,nt))("matFooterRowDefSticky",!0),c.xp6(1),c.Q6J("pageSize",10)("pageSizeOptions",c.DdM(12,it)))},directives:[x.lW,n.Od,n.rH,_.d,s.BZ,l.YE,s.w1,s.fO,s.Dz,s.mD,s.as,s.nj,s.Ke,r.NW,s.ge,l.nU,s.ev,s.yh,E.Hw,s.XQ,s.Gk,s.Q2],pipes:[o.uU],styles:["table[_ngcontent-%COMP%]{width:100%;overflow-x:auto;overflow-y:hidden;min-width:500px}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.mat-header-cell[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;font-size:14px;font-weight:700}.mat-column-accion[_ngcontent-%COMP%], .mat-column-anio[_ngcontent-%COMP%], .mat-column-dias[_ngcontent-%COMP%], .mat-column-fecha[_ngcontent-%COMP%], .mat-column-fechaToma[_ngcontent-%COMP%]{text-align:center;justify-content:center}.mat-column-fecha[_ngcontent-%COMP%], .mat-column-fechaToma[_ngcontent-%COMP%]{width:100px;max-width:120px;min-width:80px}.mat-column-anio[_ngcontent-%COMP%], .mat-column-dias[_ngcontent-%COMP%]{width:60px;max-width:70px;min-width:40px}tr.mat-row[_ngcontent-%COMP%]:hover{background-color:#b3cff3}section[_ngcontent-%COMP%]{display:table}.separador[_ngcontent-%COMP%]{padding-bottom:20px}.example-label[_ngcontent-%COMP%]{display:table-cell;font-size:16px;margin-left:8px;min-width:120px}.example-button-row[_ngcontent-%COMP%]{display:table-cell;width:490px}.example-button-row[_ngcontent-%COMP%]   .mat-button-base[_ngcontent-%COMP%]{margin:8px 8px 8px 0}"]}),t})();var rt=a(8030);function lt(t,e){1&t&&(c.TgZ(0,"th",21),c._uU(1,"Empleado"),c.qZA())}function st(t,e){if(1&t&&(c.TgZ(0,"td",22),c._uU(1),c.qZA()),2&t){const t=e.$implicit,a=c.oxw();c.xp6(1),c.hij(" ",a.getFullName(t)," ")}}function dt(t,e){1&t&&(c.TgZ(0,"th",21),c._uU(1,"Fecha Alta"),c.qZA())}function ut(t,e){if(1&t&&(c.TgZ(0,"td",22),c._uU(1),c.ALo(2,"date"),c.qZA()),2&t){const t=e.$implicit;c.xp6(1),c.hij(" ",c.xi3(2,1,t.fechaAlta,"dd/MM/yyyy")," ")}}function mt(t,e){1&t&&(c.TgZ(0,"th",21),c._uU(1,"Antiguedad"),c.qZA())}function pt(t,e){if(1&t&&(c.TgZ(0,"td",22),c._uU(1),c.qZA()),2&t){const t=e.$implicit,a=c.oxw();c.xp6(1),c.hij(" ",a.calcAntiguedad(t.fechaAlta)," ")}}function ft(t,e){1&t&&(c.TgZ(0,"th",21),c._uU(1," Dias Disponibles "),c.qZA())}function gt(t,e){if(1&t&&(c.TgZ(0,"td",22),c._uU(1),c.qZA()),2&t){const t=e.$implicit,a=c.oxw();c.xp6(1),c.hij(" ",a.diasDisponibles(t.idPersona)," ")}}function ht(t,e){1&t&&(c.TgZ(0,"th",21),c._uU(1,"Categoria"),c.qZA())}function Zt(t,e){if(1&t&&(c.TgZ(0,"td",22),c._uU(1),c.qZA()),2&t){const t=e.$implicit;c.xp6(1),c.hij(" ",t.categoria.nombre," ")}}function xt(t,e){1&t&&(c.TgZ(0,"th",23),c._uU(1,"Detalle"),c.qZA())}function wt(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"td",22),c.TgZ(1,"button",24),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw().showVacaciones(e)}),c.TgZ(2,"mat-icon",25),c._uU(3,"visibility"),c.qZA(),c.qZA(),c.qZA()}}function vt(t,e){1&t&&c._UZ(0,"tr",26)}const bt=function(t){return{selected:t}};function At(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"tr",27),c.NdJ("click",function(){const e=c.CHM(t).$implicit;return c.oxw().onClickedRow(e)}),c._uU(1," > "),c.qZA()}if(2&t){const t=e.$implicit,a=c.oxw();c.Q6J("ngClass",c.VKq(1,bt,t===a.selectedRow))}}const Ct=function(){return[10,20,50,100]},_t=[{path:"",component:(()=>{class t{constructor(t,e,a,o){this.empleadoSvc=t,this.vacacionSvc=e,this.dateAuxSvc=a,this.router=o,this.columnas=["apellido","fechaAlta","antiguedad","diasDisponibles","categoria","details"],this.dataSource=new s.by,this.empleadoEvent=new c.vpe,this.idEmpleado=-1,this.filenames=[],this.fileStatus={status:"",requestType:"",percent:0}}ngOnInit(){this.loadEmpleados(),this.loadDiasDisponibles()}ngAfterViewInit(){this.dataSource.sort=this.sort,this.dataSource.paginator=this.paginator}loadEmpleados(){this.empleadoSvc.getList().pipe((0,d.b)(t=>this.dataSource.data=t)).subscribe()}loadDiasDisponibles(){this.vacacionSvc.getDiasDisponibles().pipe((0,d.b)(t=>this.diasXempleado=t)).subscribe()}showVacaciones(t){this.idEmpleado=t.idPersona}getFullName(t){return t.apellido+" "+t.nombre}diasDisponibles(t){let e;return null===this.diasXempleado&&console.log("XXX"),e=this.diasXempleado&&this.diasXempleado.filter(e=>e.id===t)[0],e&&e.dias}exportVacacion(){this.vacacionSvc.download(-1).subscribe(t=>{console.log("SUB::: ",t),this.resportProgress(t)},t=>{console.log("ERROR::: ",t)})}resportProgress(t){switch(t.type){case i.dt.UploadProgress:this.updateStatus(t.loaded,t.total,"Uploading... ");break;case i.dt.DownloadProgress:this.updateStatus(t.loaded,t.total,"Downloading... ");break;case i.dt.ResponseHeader:console.log("Header returned",t);break;case i.dt.Response:if(t.body instanceof Array){this.fileStatus.status="done";for(const e of t.body)console.log("file:::",e),this.filenames.unshift(e)}else console.log("ELSE:::",t.headers),(0,u.saveAs)(new File([t.body],t.headers.get("File-Name"),{type:`${t.headers.get("Content-Type")};charset=utf-8`}));this.fileStatus.status="done";break;default:console.log(t)}}updateStatus(t,e,a){this.fileStatus.status="progress",this.fileStatus.requestType=a,this.fileStatus.percent=Math.round(100*t/e)}calcAntiguedad(t){return this.dateAuxSvc.calcAntiguedad(t)}applyFilter(t){this.dataSource.filter=t.target.value.trim().toLowerCase()}onClickedRow(t){this.showVacaciones(t),this.selectedRow=t}ngOnDestroy(){console.log("Chau...")}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(m.i),c.Y36(p.e),c.Y36(f.U),c.Y36(n.F0))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-empleado-vacaciones"]],viewQuery:function(t,e){if(1&t&&(c.Gf(l.YE,5),c.Gf(r.NW,5)),2&t){let t;c.iGM(t=c.CRH())&&(e.sort=t.first),c.iGM(t=c.CRH())&&(e.paginator=t.first)}},outputs:{empleadoEvent:"empleadoEvent"},decls:34,vars:8,consts:[[1,"container"],["fxFlex","48","fxFlex.xs","50",1,"container-table"],[1,"search-row"],[1,"cl-input"],["matInput","","placeholder","Ex. ium",3,"keyup"],["input",""],["mat-stroked-button","","color","primary","routerLinkActive","",3,"routerLink","click"],["mat-table","","matSort","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","apellido"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","fechaAlta"],["matColumnDef","antiguedad"],["matColumnDef","diasDisponibles"],["matColumnDef","categoria"],["matColumnDef","details"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"ngClass","click",4,"matRowDef","matRowDefColumns"],[3,"pageSize","pageSizeOptions"],[3,"idEmpleado"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-icon-button","","color","primary",3,"click"],[1,"mat-18"],["mat-header-row",""],["mat-row","",3,"ngClass","click"]],template:function(t,e){1&t&&(c.TgZ(0,"section",0),c.TgZ(1,"div",1),c.TgZ(2,"div",2),c.TgZ(3,"mat-form-field",3),c.TgZ(4,"mat-label"),c._uU(5,"Buscar..."),c.qZA(),c.TgZ(6,"input",4,5),c.NdJ("keyup",function(t){return e.applyFilter(t)}),c.qZA(),c.qZA(),c.TgZ(8,"button",6),c.NdJ("click",function(){return e.exportVacacion()}),c._uU(9," Exportar "),c.qZA(),c.qZA(),c.TgZ(10,"table",7),c.ynx(11,8),c.YNc(12,lt,2,0,"th",9),c.YNc(13,st,2,1,"td",10),c.BQk(),c.ynx(14,11),c.YNc(15,dt,2,0,"th",9),c.YNc(16,ut,3,4,"td",10),c.BQk(),c.ynx(17,12),c.YNc(18,mt,2,0,"th",9),c.YNc(19,pt,2,1,"td",10),c.BQk(),c.ynx(20,13),c.YNc(21,ft,2,0,"th",9),c.YNc(22,gt,2,1,"td",10),c.BQk(),c.ynx(23,14),c.YNc(24,ht,2,0,"th",9),c.YNc(25,Zt,2,1,"td",10),c.BQk(),c.ynx(26,15),c.YNc(27,xt,2,0,"th",16),c.YNc(28,wt,4,0,"td",10),c.BQk(),c.YNc(29,vt,1,0,"tr",17),c.YNc(30,At,2,3,"tr",18),c.qZA(),c._UZ(31,"mat-paginator",19),c.qZA(),c.TgZ(32,"div",1),c._UZ(33,"app-vacacion-list",20),c.qZA(),c.qZA()),2&t&&(c.xp6(8),c.Q6J("routerLink","exportExcel"),c.xp6(2),c.Q6J("dataSource",e.dataSource),c.xp6(19),c.Q6J("matHeaderRowDef",e.columnas),c.xp6(1),c.Q6J("matRowDefColumns",e.columnas),c.xp6(1),c.Q6J("pageSize",10)("pageSizeOptions",c.DdM(7,Ct)),c.xp6(2),c.Q6J("idEmpleado",e.idEmpleado))},directives:[g.yH,h.KE,h.hX,Z.Nt,x.lW,n.Od,n.rH,s.BZ,l.YE,s.w1,s.fO,s.Dz,s.as,s.nj,r.NW,ct,s.ge,l.nU,s.ev,E.Hw,s.XQ,s.Gk,o.mk,rt.oO],pipes:[o.uU],styles:[".container[_ngcontent-%COMP%]{width:100%;display:flex;flex-flow:row wrap;justify-content:space-around}.container-table[_ngcontent-%COMP%], table[_ngcontent-%COMP%]{min-width:500px}table[_ngcontent-%COMP%]{width:100%;overflow-x:auto;overflow-y:hidden}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.mat-header-cell[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;font-size:14px;font-weight:700}.mat-column-antiguedad[_ngcontent-%COMP%], .mat-column-details[_ngcontent-%COMP%], .mat-column-diasDisponibles[_ngcontent-%COMP%], .mat-column-fechaAlta[_ngcontent-%COMP%]{text-align:center;justify-content:center}tr.mat-row[_ngcontent-%COMP%]:hover{background-color:#b3f3b3}.mat-row[_ngcontent-%COMP%]   .mat-cell[_ngcontent-%COMP%]{border-bottom:1px solid #0000;border-top:1px solid #0000;cursor:pointer}.mat-row[_ngcontent-%COMP%]:hover   .mat-cell[_ngcontent-%COMP%]{border-color:currentColor}.selected[_ngcontent-%COMP%]{background-color:#f1f0f0de!important;font-weight:700!important}.mat-row[_ngcontent-%COMP%]:nth-child(2n){background-color:#e4f0ec}.mat-row[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff}.search-row[_ngcontent-%COMP%]{width:100%;display:flex;flex-flow:row wrap;padding-bottom:8px;padding-top:8px}.search-row[_ngcontent-%COMP%]   .cl-input[_ngcontent-%COMP%]{width:50%}.search-row[_ngcontent-%COMP%]   .mat-button-base[_ngcontent-%COMP%]{margin:8px}.search-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:85px;height:36px;background-color:#97cc97}"]}),t})(),children:[{path:"list",component:ct},{path:"create",component:S},{path:"delete/:id",component:Y},{path:"",redirectTo:"",pathMatch:"full"},{path:"**",redirectTo:"list",pathMatch:"full"}]}];let Tt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[n.Bz.forChild(_t)],n.Bz]}),t})();var yt=a(7054),qt=a(8445);let kt=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({}),t})(),Ot=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({providers:[kt],imports:[[o.ez,Tt,A.u5,A.UX,yt.m,qt.q,kt]]}),t})()}}]);